<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
	<constant name="struts.devMode" value="true" />
	<constant name="struts.action.extension" value="go" />
	<constant name="struts.locale" value="en_CA" />
	<constant name="struts.custom.i18n.resources" value="ApplicationMessages" />
	<constant name="struts.ui.theme" value="simple" />
	<constant name="struts.url.includeParams" value="none" />

	<include file="struts-default.xml" />

	<package name="default" extends="struts-default">
		<interceptors>
			<interceptor-stack name="loggingDefaultStack">
				<interceptor-ref name="defaultStack">
					<param name="exception.logEnabled">true</param>
					<param name="exception.logLevel">ERROR</param>
					<param name="exception.logCategory">com.gb1</param>
				</interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<default-interceptor-ref name="loggingDefaultStack" />

		<global-results>
			<result name="exception">/views/public/error.jsp</result>
		</global-results>
		<global-exception-mappings>
			<exception-mapping result="exception" exception="java.lang.Exception" />
		</global-exception-mappings>
	</package>

	<package name="registration" extends="default" namespace="/public/register">
		<action name="request" method="input" class="userRegistrationAction">
			<result name="input">/views/public/security/register/request.jsp</result>
		</action>
		<action name="register" method="register" class="userRegistrationAction">
			<result name="input">/views/public/security/register/request.jsp</result>
			<result>/views/public/security/register/request-success.jsp</result>
		</action>

		<action name="challenge" method="input" class="userActivationAction">
			<result name="input">/views/public/security/register/activate.jsp</result>
		</action>
		<action name="activate" method="activate" class="userActivationAction">
			<result name="input">/views/public/security/register/activate.jsp</result>
			<result>/views/public/security/register/activate-success.jsp</result>
		</action>
	</package>

	<package name="security" extends="default" namespace="/public/security">
		<action name="signOff" method="execute"
			class="com.gb1.healthcheck.web.security.SignOffAction">
			<result>/</result>
		</action>
		<action name="lostPassword" method="input" class="lostPasswordAction">
			<result name="input">/views/public/security/lostPassword.jsp</result>
		</action>
		<action name="sendPassword" method="sendLostPassword" class="lostPasswordAction">
			<result name="input">/views/public/security/lostPassword.jsp</result>
			<result>/views/public/security/lostPassword-success.jsp</result>
		</action>
	</package>

	<package name="users" extends="default" namespace="/users">
		<action name="editInput" method="input" class="editActiveUserAction">
			<result name="input">/views/users/editActiveUser.jsp</result>
		</action>
		<action name="editSubmit" method="submit" class="editActiveUserAction">
			<result name="input">/views/users/editActiveUser.jsp</result>
			<result name="success" type="redirect-action">
				<param name="namespace">/workbench</param>
				<param name="actionName">show</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>
	</package>

	<package name="workbench" extends="default" namespace="/workbench">
		<action name="show" method="execute" class="workbenchAction">
			<result>/views/workbench/show.jsp</result>
		</action>
	</package>

	<package name="foods" extends="default" namespace="/foods">
		<action name="list" method="list" class="listFoodsAction">
			<result>/views/foods/listFoods.jsp</result>
		</action>
	</package>

	<package name="simpleFood" extends="default" namespace="/foods/simpleFood">
		<action name="createInput" method="input" class="createSimpleFoodAction">
			<result name="input">/views/foods/editSimpleFood.jsp</result>
		</action>

		<action name="createSubmit" method="submit" class="createSimpleFoodAction">
			<result name="input">/views/foods/editSimpleFood.jsp</result>
			<result name="success" type="redirect-action">
				<param name="namespace">/foods</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>

		<action name="updateInput" method="input" class="updateSimpleFoodAction">
			<result name="input">/views/foods/editSimpleFood.jsp</result>
		</action>

		<action name="updateSubmit" method="submit" class="updateSimpleFoodAction">
			<result name="input">/views/foods/editSimpleFood.jsp</result>
			<result name="success" type="redirect-action">
				<param name="namespace">/foods</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>

		<action name="delete" method="submit" class="deleteSimpleFoodAction">
			<result name="success" type="redirect-action">
				<param name="namespace">/foods</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>
	</package>

	<package name="complexFood" extends="default" namespace="/foods/complexFood">
		<action name="createInput" method="input" class="createComplexFoodAction">
			<result name="input">/views/foods/editComplexFood.jsp</result>
		</action>

		<action name="createSubmit" method="submit" class="createComplexFoodAction">
			<result name="input">/views/foods/editComplexFood.jsp</result>
			<result name="success" type="redirect-action">
				<param name="namespace">/foods</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>

		<action name="updateInput" method="input" class="updateComplexFoodAction">
			<result name="input">/views/foods/editComplexFood.jsp</result>
		</action>

		<action name="updateSubmit" method="submit" class="updateComplexFoodAction">
			<result name="input">/views/foods/editComplexFood.jsp</result>
			<result name="success" type="redirect-action">
				<param name="namespace">/foods</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>

		<action name="delete" method="submit" class="deleteComplexFoodAction">
			<result name="success" type="redirect-action">
				<param name="namespace">/foods</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>
	</package>

	<package name="meals" extends="default" namespace="/meals">
		<action name="list" method="list" class="listMealsAction">
			<result>/views/meals/listMeals.jsp</result>
		</action>

		<action name="createInput" method="input" class="createMealAction">
			<result name="input">/views/meals/createMeal.jsp</result>
		</action>

		<action name="createSubmit" method="submit" class="createMealAction">
			<result name="input">/views/meals/createMeal.jsp</result>
			<result name="success" type="redirect-action">
				<param name="namespace">/meals</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>

		<action name="updateInput" method="input" class="updateMealAction">
			<result name="input">/views/meals/updateMeal.jsp</result>
		</action>

		<action name="updateSubmit" method="update" class="updateMealAction">
			<result name="input">/views/meals/updateMeal.jsp</result>
			<result name="success" type="redirect-action">
				<param name="namespace">/meals</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>

		<action name="delete" method="delete" class="deleteMealAction">
			<result name="success" type="redirect-action">
				<param name="namespace">/meals</param>
				<param name="actionName">list</param>
				<param name="parse">true</param>
				<param name="actionMessageKey">${actionMessageKey}</param>
			</result>
		</action>
	</package>

	<package name="gastricStates" extends="default" namespace="/metrics">
		<action name="manage" method="show" class="manageGastricStatesAction">
			<result>/views/metrics/gastricStates.jsp</result>
		</action>
	</package>

</struts>
